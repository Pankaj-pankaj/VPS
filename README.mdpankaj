# Continuous SSH Access to GitHub Actions Runner

This guide explains how to set up continuous SSH access to a GitHub Actions runner using ngrok. You'll learn how to configure a GitHub Actions workflow and connect to the runner using Termux.

## Prerequisites

1. **ngrok Account**: Sign up for an ngrok account at [ngrok.com](https://ngrok.com/).
2. **GitHub Repository**: A GitHub repository where you can set up the Actions workflow.
3. **Termux**: Install Termux on your Android device from [Google Play](https://play.google.com/store/apps/details?id=com.termux) or [F-Droid](https://f-droid.org/packages/com.termux/).

## Steps

### 1. Set Up GitHub Secrets

#### Find Your ngrok Token

1. Log in to your ngrok account at [ngrok.com](https://ngrok.com/).
2. Go to your [dashboard](https://dashboard.ngrok.com/).
3. On the dashboard, find your **Auth token** under the "Your Authtoken" section.
4. Copy the token.

#### Add Secrets in GitHub

1. Go to your GitHub repository.
2. Click on `Settings`.
3. In the left sidebar, click on `Secrets and variables` and then `Actions`.
4. Click `New repository secret`.
5. Add the following secrets:

    - `SSH_PASSWORD`: The password for SSH access.
    - `NGROK_TOKEN`: Paste the ngrok authtoken you copied.

### 2. Configure GitHub Actions Workflow

1. Fork the repository containing the workflow file.
2. In your fork, locate the `.github/workflows` directory.
3. The workflow file `ssh-access.yml` is already configured to install OpenSSH, start ngrok, and keep the runner alive.

### 3. Trigger the Workflow

1. Push any changes to your forked repository to trigger the workflow.
2. Manually trigger the workflow from the Actions tab on GitHub or wait for the scheduled trigger.

### 4. Get SSH Connection Details

1. Go to the Actions tab in your GitHub repository.
2. Select the latest run of the "Persistent SSH Access Workflow".
3. In the workflow logs, find the SSH command to connect. It will be in the format:

    ```plaintext
    ssh -p [PORT] runner@[HOST]
    ```

    The `[HOST]` and `[PORT]` values will be dynamically generated by ngrok.

### 5. Connect via SSH Using Termux

1. Open Termux on your Android device.
2. Install OpenSSH if not already installed:

    ```sh
    pkg install openssh
    ```

3. Connect to the GitHub Actions runner using the SSH command from the workflow logs. For example:

    ```sh
    ssh -p 12345 runner@0.tcp.ngrok.io
    ```

### 6. Maintain Continuous Access

The workflow is scheduled to run every 6 hours to ensure continuous access. If disconnected, check the latest workflow logs for updated SSH connection details and reconnect using the new command.

### Troubleshooting

- **Connection Issues**: Ensure that the ngrok token and SSH password are correctly configured in the GitHub Secrets.
- **Timeouts**: The GitHub Actions runner has a maximum runtime of 6 hours. The workflow will restart automatically, but you may need to reconnect using the updated SSH command from the latest logs.

## Conclusion

By following these steps, you can set up continuous SSH access to a GitHub Actions runner with minimal interruptions. This setup is particularly useful for long-running processes and remote development.

For further assistance, refer to the [ngrok documentation](https://ngrok.com/docs) and [GitHub Actions documentation](https://docs.github.com/en/actions).
